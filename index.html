<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Your FREE Reward!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-62KYN72VR5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-62KYN72VR5');
    </script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            padding-top: 120px; /* Increased from 100px to add more space */
            padding-left: 16%;
            padding-right: 16%;
            box-sizing: border-box;
        }

        #app {
            min-height: calc(100vh - 100px);
        }
        
        .form-radio {
            width: 1.25rem;
            height: 1.25rem;
            background-color: rgb(55 65 81);
            border: 1px solid rgb(75 85 99);
            color: rgb(59 130 246);
            border-radius: 9999px;
            vertical-align: middle;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        .form-radio:checked {
            background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e");
            background-color: rgb(59 130 246);
            border-color: rgb(59 130 246);
        }
        
        .form-checkbox {
            width: 1.25rem;
            height: 1.25rem;
            background-color: rgb(55 65 81);
            border: 1px solid rgb(75 85 99);
            color: rgb(59 130 246);
            border-radius: 0.25rem;
            vertical-align: middle;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        .form-checkbox:checked {
            background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
            background-color: rgb(59 130 246);
            border-color: rgb(59 130 246);
        }

        .form-radio:focus, .form-checkbox:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: rgb(59 130 246);
            box-shadow: 0 0 0 2px rgb(59 130 246 / 0.5);
        }
        
        .form-input {
            width: 100%;
            padding: 0.75rem; /* p-3 */
            background-color: rgb(55 65 81); /* bg-gray-700 */
            border: 1px solid rgb(75 85 99); /* border-gray-600 */
            border-radius: 0.5rem; /* rounded-lg */
            color: white;
            transition: all 0.2s ease-in-out;
        }
        .form-input::placeholder {
            color: rgb(156 163 175); /* placeholder-gray-400 */
        }
        .form-input:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: rgb(59 130 246);
            box-shadow: 0 0 0 2px rgb(59 130 246 / 0.5); /* focus:ring-2 focus:ring-blue-500 */
        }

        @keyframes title-gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .animate-title-gradient {
            background-size: 200% auto;
            animation: title-gradient 6s ease infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 10px rgba(59, 130, 246, 0.3); }
            50% { box-shadow: 0 0 25px rgba(59, 130, 246, 0.7); }
        }
        .animate-glow {
            animation: glow 3s ease-in-out infinite;
        }

        .error-message {
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .error-message.show {
            opacity: 1;
        }

        /* --- Adblocker Modal Styles --- */
        #adblock-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(17, 24, 39, 0.95);
            z-index: 99998;
            display: none; /* Hidden by default */
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
        }

        /* --- Adblock Bait Styles --- */
        .ad-bait {
            height: 1px;
            width: 1px;
            position: fixed;
            bottom: 0;
            left: 0;
            opacity: 0.01;
            pointer-events: none;
            z-index: -1;
        }
    </style>
</head>
<body class="bg-gray-900 text-white h-full overflow-x-hidden">

    <div id="adblock-modal">
        <div class="text-white">
            <svg class="w-24 h-24 mx-auto text-red-500 mb-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
            <h1 class="text-5xl font-extrabold mb-4">Ad-Blocker Detected!</h1>
            <p class="text-2xl text-gray-300 mb-8">
                This site relies on ads to function and provide rewards.
            </p>
            <p class="text-xl text-gray-400">
                Please disable your ad-blocker and refresh the page to continue.
            </p>
        </div>
    </div>
    <div class="ad-bait" id="ad-bait"></div>


    <div style="position: absolute; z-index: 99999">
      <input autocomplete="off" type="checkbox" id="aadsstickymhnllgsu" hidden />
      <div style="padding-top: auto; padding-bottom: 0;">
        <div style="width:100%;height:auto;position:fixed;text-align:center;font-size:0;top:0;left:0;right:0;margin:auto">
          <div id="frame" style="width: 100%;margin: auto;position: relative; z-index: 99998;"><iframe data-aa=2416404 src=//acceptable.a-ads.com/2416404/?size=Adaptive style='border:0; padding:0; width:70%; height:auto; overflow:hidden; margin: auto'></iframe></div>
        </div>
        <style>
      #aadsstickymhnllgsu:checked + div {
        display: none;
      }
    </style>
    </div></div>

    <div style="position: absolute; z-index: 99999">
      <input autocomplete="off" type="checkbox" id="aadsstickymhnlmkfw" hidden />
      <div style="padding-top: 0; padding-bottom: 0;">
        <div style="width:15%;height:100%;position:fixed;text-align:center;font-size:0;top:50%;transform:translateY(-50%);left:0;min-width:100px">
          <div id="frame" style="width: 100%;margin: auto;position: relative; z-index: 99998;height:100%; display: flex;flex-direction: column; justify-content: center">
                      <iframe data-aa=2416404 src=//acceptable.a-ads.com/2416404/?size=Adaptive style='border:0; padding:0; width:70%; height:70%; overflow:hidden; margin: 0 auto'></iframe>
                  </div>
        </div>
        <style>
      #aadsstickymhnlmkfw:checked + div {
        display: none;
      }
    </style>
    </div></div>

    <div style="position: absolute; z-index: 99999">
      <input autocomplete="off" type="checkbox" id="aadsstickymhnlms89" hidden />
      <div style="padding-top: 0; padding-bottom: 0;">
        <div style="width:15%;height:100%;position:fixed;text-align:center;font-size:0;top:50%;transform:translateY(-50%);right:0;min-width:100px">
          <div id="frame" style="width: 100%;margin: auto;position: relative; z-index: 99998;height:100%; display: flex;flex-direction: column; justify-content: center">
                      <iframe data-aa=2416404 src=//acceptable.a-ads.com/2416404/?size=Adaptive style='border:0; padding:0; width:70%; height:70%; overflow:hidden; margin: 0 auto'></iframe>
                  </div>
        </div>
        <style>
      #aadsstickymhnlms89:checked + div {
        display: none;
      }
    </style>
    </div></div>

    <div id="app" class="w-full max-w-4xl mx-auto px-4 py-8">
    </div>

    <script>
        // --- MODIFIED: Added authId to global variables ---
        let currentPage, currentQuestionIndex, selectedPrize, skippedCount, authId;
        let errorTimeout;
        
        const surveyQuestions = [
            { q: "What is your favorite color?", type: "radio", o: ["Red", "Green", "Blue", "Yellow", "Purple", "Other"] },
            { q: "What is your favorite animal?", type: "radio", o: ["Dog", "Cat", "Bird", "Fish", "Reptile", "Other"] },
            { q: "What is your favorite food?", type: "text" },
            { q: "What is your favorite season?", type: "radio", o: ["Spring", "Summer", "Autumn (Fall)", "Winter"] },
            { q: "Do you prefer indoor or outdoor activities?", type: "radio", o: ["Indoor", "Outdoor", "Both"] },
            { q: "What is your favorite school subject?", type: "text" },
            { q: "What is your favorite movie genre?", type: "radio", o: ["Comedy", "Action", "Sci-Fi", "Horror", "Drama", "Animation"] },
            { q: "How many siblings do you have?", type: "radio", o: ["0", "1", "2", "3", "4+"] },
            { q: "What is your favorite type of music?", type: "text" },
            { q: "Do you play any musical instruments?", type: "radio", o: ["Yes", "No", "I want to"] },
            { q: "What is your favorite video game?", type: "text" },
            { q: "Which platform do you play on most?", type: "checkbox", o: ["PC", "PlayStation", "Xbox", "Nintendo Switch", "Mobile (Phone/Tablet)"] },
            { q: "Do you prefer single-player or multi-player games?", type: "radio", o: ["Single-player", "Multi-player"] },
            { q: "How many hours a week do you play games?", type: "radio", o: ["0-2", "3-5", "6-10", "11-15", "16+"] },
            { q: "What's your favorite Roblox game?", type: "text" },
            { q: "Have you ever used Discord Nitro?", type: "radio", o: ["Yes", "No"] },
            { q: "What's your favorite thing about Discord?", type: "text" },
            { q: "Which of these have you played?", type: "checkbox", o: ["Roblox", "Minecraft", "Fortnite", "Among Us", "Apex Legends"] },
            { q: "What do you look for in a new game?", type: "text" },
            { q: "Rate your gaming skill from 1 (Beginner) to 5 (Pro).", type: "radio", o: ["1", "2", "3", "4", "5"] },
            { q: "What is your LEAST favorite color?", type: "text" },
            { q: "What is your LEAST favorite food?", type: "text" },
            { q: "What is your favorite day of the week?", type: "radio", o: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"] },
            { q: "What is your LEAST favorite day of the week?", type: "radio", o: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"] },
            { q: "Do you prefer waking up early or staying up late?", type: "radio", o: ["Waking up early", "Staying up late"] },
            { q: "What's the weather like today?", type: "text" },
            { q: "What is your favorite drink?", type: "text" },
            { q: "Do you prefer sweet or savory snacks?", type: "radio", o: ["Sweet", "Savory", "Both"] },
            { q: "What is your favorite fruit?", type: "text" },
            { q: "What is your favorite vegetable?", type: "text" },
            { q: "Do you like pineapple on pizza?", type: "radio", o: ["Yes", "No", "Sometimes"] },
            { q: "What is your favorite ice cream flavor?", type: "text" },
            { q: "Do you prefer burgers or hot dogs?", type: "radio", o: ["Burgers", "Hot Dogs", "Neither"] },
            { q: "What is your favorite candy?", type: "text" },
            { q: "How many meals do you eat a day?", type: "radio", o: ["1", "2", "3", "4+"] },
            { q: "What color are your shoes?", type: "text" },
            { q: "What color is your shirt/top?", type: "text" },
            { q: "Do you prefer books or movies?", type: "radio", o: ["Books", "Movies", "Both"] },
            { q: "What is your favorite book?", type: "text" },
            { q: "What is the last movie you watched?", type: "text" },
            { q: "Do you prefer cats or dogs?", type: "radio", o: ["Cats", "Dogs", "Both", "Neither"] },
            { q: "What is your dream vacation?", type: "text" },
            { q: "Do you prefer the beach or the mountains?", type: "radio", o: ["Beach", "Mountains", "Both"] },
            { q: "What superpower would you want?", type: "text" },
            { q: "Would you rather be able to fly or be invisible?", type: "radio", o: ["Fly", "Be Invisible"] },
            { q: "What is your favorite holiday?", type: "text" },
            { q: "Do you like roller coasters?", type: "radio", o: ["Yes", "No", "Sometimes"] },
            { q: "What's your favorite thing to do on a rainy day?", type: "text" },
            { q: "What is your favorite board game?", type: "text" },
            { q: "Do you prefer drawing or writing?", type: "radio", o: ["Drawing", "Writing", "Both"] },
            { q: "What is your favorite emoji?", type: "text" },
            { q: "Do you use a light theme or dark theme?", type: "radio", o: ["Light Theme", "Dark Theme"] },
            { q: "What is your favorite app on your phone?", type: "text" },
            { q: "Do you prefer Apple or Android?", type: "radio", o: ["Apple", "Android", "Neither"] },
            { q: "What is your favorite sport to watch?", type: "text" },
            { q: "What is your favorite sport to play?", type: "text" },
            { q: "Who is your favorite superhero?", type: "text" },
            { q: "Who is your favorite villain?", type: "text" },
            { q: "What's your favorite meme?", type: "text" },
            { q: "Do you watch YouTube or TikTok more?", type: "radio", o: ["YouTube", "TikTok", "Both", "Neither"] },
            { q: "Do you like school?", type: "radio", o: ["Yes", "No", "It's okay"] },
            { q: "Is math your favorite subject?", type: "radio", o: ["Yes", "No"] },
            { q: "Is English your favorite subject?", type: "radio", o: ["Yes", "No"] },
            { q: "Is Science your favorite subject?", type: "radio", o: ["Yes", "No"] },
            { q: "Is History your favorite subject?", type: "radio", o: ["Yes", "No"] },
            { q: "Is Art your favorite subject?", type: "radio", o: ["Yes", "No"] },
            { q: "Is P.E. your favorite subject?", type: "radio", o: ["Yes", "No"] },
            { q: "Do you do your homework on time?", type: "radio", o: ["Yes", "No", "Sometimes"] },
            { q: "Do you have a pet?", type: "radio", o: ["Yes", "No"] },
            { q: "If you have a pet, what is its name?", type: "text" },
            { q: "Do you like to read?", type: "radio", o: ["Yes", "No"] },
            { q: "Do you like to draw?", type: "radio", o: ["Yes", "No"] },
            { q: "Do you like to sing?", type: "radio", o: ["Yes", "No"] },
            { q: "Do you like to dance?", type: "radio", o: ["Yes", "No"] },
            { q: "Have you ever built a snowman?", type: "radio", o: ["Yes", "No"] },
            { q: "Have you ever been on an airplane?", type: "radio", o: ["Yes", "No"] },
            { q: "Have you ever been to a concert?", type: "radio", o: ["Yes", "No"] },
            { q: "Do you know how to swim?", type: "radio", o: ["Yes", "No"] },
            { q: "Do you know how to ride a bike?", type: "radio", o: ["Yes", "No"] },
            { q: "Are you enjoying this survey?", type: "radio", o: ["Yes", "No", "It's okay"] },
            { q: "What did you have for lunch?", type: "text" },
            { q: "What are you doing after this?", type: "text" },
            { q: "What is your favorite number?", type: "text" },
            { q: "What is your lucky number?", type: "text" },
            { q: "What is your favorite letter of the alphabet?", type: "text" },
            { q: "Do you prefer to type or write by hand?", type: "radio", o: ["Type", "Write by hand"] },
            { q: "What is your favorite store?", type: "text" },
            { q: "What is your favorite restaurant?", type: "text" },
            { q: "What is your favorite thing to buy on Amazon?", type: "text" },
            { q: "If you chose PayPal, what will you buy?", type: "text" },
            { q: "If you chose Robux, what will you buy?", type: "text" },
            { q: "How often do you check Discord?", type: "radio", o: ["Multiple times a day", "Once a day", "A few times a week", "Rarely"] },
            { q: "This is question 93. Are you almost done?", type: "radio", o: ["Yes", "No"] },
            { q: "What is your favorite mythical creature?", type: "text" },
            { q: "Do you believe in aliens?", type: "radio", o: ["Yes", "No", "Maybe"] },
            { q: "What is your favorite planet?", type: "text" },
            { q: "Which reward did you pick again?", type: "radio", o: ["Robux", "PayPal", "Amazon", "Discord Nitro"] },
            { q: "On a scale of 1-10, how much do you want this reward?", type: "radio", o: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"] },
            { q: "Just one more question after this!", type: "text", p: "Type 'OK' to continue" },
            { q: "Finally, was this survey long enough?", type: "radio", o: ["Yes", "No", "It was TOO long"] }
        ];

        const fixedAdHtml = `
            <div id="frame" class="my-8" style="width: 100%;margin: auto;position: relative; z-index: 99998;">
                <iframe data-aa='2416404' src='//acceptable.a-ads.com/2416404/?size=Adaptive'
                        style='border:0; padding:0; width:70%; height:auto; overflow:hidden;display: block;margin: auto'></iframe>
            </div>
        `;

        // --- Adblock Detector Function ---
        function checkAdBlocker() {
            const adBait = document.getElementById('ad-bait');
            if (!adBait) return;
            
            // Give adblocker scripts a moment to run
            setTimeout(() => {
                if (adBait.offsetHeight === 0) {
                    // If bait is hidden, show the modal
                    const modal = document.getElementById('adblock-modal');
                    if(modal) modal.style.display = 'flex';
                } else {
                    console.log('Adblocker not detected.');
                }
            }, 2000); // 2 second delay
        }

        function generateRedeemCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        function renderHomePage() {
            const app = document.getElementById('app');
            app.innerHTML = `
                <div class="text-center">
                    <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 mb-6 animate-title-gradient">
                        CHOOSE YOUR REWARD!
                    </h1>
                    <p class="text-lg text-gray-300 mb-12">
                        Select one of the amazing rewards below to begin.
                    </p>

                    ${fixedAdHtml}

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8 mt-12">
                        
                        <div onclick="selectPrize('$500 Robux')" class="bg-gray-800 rounded-2xl shadow-2xl p-8 border-2 border-gray-700 hover:border-blue-500 transition-all duration-300 cursor-pointer transform hover:scale-105 hover:shadow-lg hover:shadow-blue-400/50 animate-glow text-center flex flex-col justify-center min-h-[160px]">
                            <h2 class="text-3xl font-bold text-white mb-2">$500 Robux</h2>
                            <p class="text-gray-400">Get a $500 Robux gift card!</p>
                        </div>

                        <div onclick="selectPrize('$500 PayPal')" class="bg-gray-800 rounded-2xl shadow-2xl p-8 border-2 border-gray-700 hover:border-blue-500 transition-all duration-300 cursor-pointer transform hover:scale-105 hover:shadow-lg hover:shadow-blue-400/50 animate-glow text-center flex flex-col justify-center min-h-[160px]" style="animation-delay: 0.5s;">
                            <h2 class="text-3xl font-bold text-white mb-2">$500 PayPal</h2>
                            <p class="text-gray-400">Get $500 sent to your PayPal!</p>
                        </div>

                        <div onclick="selectPrize('$1000 Amazon')" class="bg-gray-800 rounded-2xl shadow-2xl p-8 border-2 border-gray-700 hover:border-blue-500 transition-all duration-300 cursor-pointer transform hover:scale-105 hover:shadow-lg hover:shadow-blue-400/5g animate-glow text-center flex flex-col justify-center min-h-[160px]" style="animation-delay: 1s;">
                            <h2 class="text-3xl font-bold text-white mb-2">$1000 Amazon</h2>
                            <p class="text-gray-400">A $1000 Amazon gift card!</p>
                        </div>

                        <div onclick="selectPrize('1 Year Discord Nitro')" class="bg-gray-800 rounded-2xl shadow-2xl p-8 border-2 border-gray-700 hover:border-blue-500 transition-all duration-300 cursor-pointer transform hover:scale-105 hover:shadow-lg hover:shadow-blue-400/50 animate-glow text-center flex flex-col justify-center min-h-[160px]" style="animation-delay: 1.5s;">
                            <h2 class="text-3xl font-bold text-white mb-2">1 Year Discord Nitro</h2>
                            <p class="text-gray-400">Get 1 year of Discord Nitro (with boosts)!</p>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function renderSurveyPage() {
            const app = document.getElementById('app');
            const question = surveyQuestions[currentQuestionIndex];
            const progress = ((currentQuestionIndex + 1) / surveyQuestions.length) * 100;

            let answerHtml = '';
            
            if (question.type === 'radio') {
                answerHtml = question.o.map((option, index) => `
                    <label for="option${index}" class="flex items-center p-4 bg-gray-800 rounded-lg border border-gray-700 cursor-pointer hover:bg-gray-700 transition-colors">
                        <input type="radio" id="option${index}" name="answer" value="${option}" class="form-radio">
                        <span class="ml-3 text-lg">${option}</span>
                    </label>
                `).join('');
            } else if (question.type === 'checkbox') {
                answerHtml = question.o.map((option, index) => `
                    <label for="option${index}" class="flex items-center p-4 bg-gray-800 rounded-lg border border-gray-700 cursor-pointer hover:bg-gray-700 transition-colors">
                        <input type="checkbox" id="option${index}" name="answer" value="${option}" class="form-checkbox">
                        <span class="ml-3 text-lg">${option}</span>
                    </label>
                `).join('');
            } else if (question.type === 'text') {
                answerHtml = `
                    <div class="p-4 bg-gray-800 rounded-lg border border-gray-700">
                        <label for="answer" class="block text-lg font-medium text-gray-200 mb-3">Your Answer:</label>
                        <input type="text" id="answer" name="answer" class="form-input" placeholder="${question.p || 'Type your answer here...'}">
                    </div>
                `;
            }

            // --- MODIFIED: Removed authId generation ---

            app.innerHTML = `
                <div class="w-full">
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-semibold text-blue-300">Question ${currentQuestionIndex + 1}</span>
                            <span class="text-sm font-semibold text-gray-400">${Math.round(progress)}% Complete</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2.5">
                            <div class="bg-gradient-to-r from-blue-500 to-purple-500 h-2.5 rounded-full" style="width: ${progress}%"></div>
                        </div>
                    </div>

                    <h2 class="text-3xl font-bold mb-8 text-center">${question.q}</h2>

                    <div class="space-y-4 mb-10">
                        ${answerHtml}
                    </div>

                    <div class="w-full flex flex-col items-center justify-center my-10 p-6 bg-gray-800/50 rounded-lg border border-gray-700 shadow-inner">
                        <button onclick="validateAndNextQuestion()" class="px-10 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xl font-bold rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 active:scale-100 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50">
                            ${currentQuestionIndex === surveyQuestions.length - 1 ? 'Finish Survey' : 'Next Question'}
                            <svg class="inline w-6 h-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                        </button>
                        <div id="validation-error" class="text-red-400 mt-4 text-lg error-message"></div>
                        
                        <button onclick="skipQuestion()" class="mt-4 text-gray-400 hover:text-white transition-colors duration-200 focus:outline-none">
                            Skip this question (-$5 penalty)
                        </button>

                        <p class="text-xs text-gray-500 mt-2 font-mono" style="letter-spacing: -0.5px;">
                            Authentication ID: ${authId}
                        </p>
                    </div>

                    ${fixedAdHtml}

                </div>
            `;
        }

        function renderCompletePage() {
            const app = document.getElementById('app');
            const redeemCode = generateRedeemCode();
            
            const penalty = skippedCount * 5;
            let finalPrizeString = selectedPrize;
            let penaltyMessage = `You skipped ${skippedCount} ${skippedCount === 1 ? 'question' : 'questions'}, incurring a $${penalty} processing fee.`;

            switch(selectedPrize) {
                case '$500 Robux':
                    finalPrizeString = `$${Math.max(0, 500 - penalty)} Robux`;
                    break;
                case '$500 PayPal':
                    finalPrizeString = `$${Math.max(0, 500 - penalty)} PayPal`;
                    break;
                case '$1000 Amazon':
                    finalPrizeString = `$${Math.max(0, 1000 - penalty)} Amazon`;
                    break;
                case '1 Year Discord Nitro':
                    finalPrizeString = '1 Year Discord Nitro*';
                    penaltyMessage = `*You skipped ${skippedCount} ${skippedCount === 1 ? 'question' : 'questions'}. A $${penalty} processing fee will be applied to your reward.`;
                    break;
            }

            app.innerHTML = `
                <div class="text-center py-16">
                    <h1 class="text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-blue-500 mb-6">
                        Congratulations!
                    </h1>
                    <p class="text-2xl text-gray-300 mb-12">
                        You've successfully completed the survey!
                    </p>
                    <div class="bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700">
                        <p class="text-xl text-gray-200 mb-4">
                            To claim your reward (<span class="font-bold text-yellow-400">${finalPrizeString}</span>), follow these steps:
                        </p>
                        
                        ${skippedCount > 0 ? `<p class="text-lg text-red-400 mb-6">${penaltyMessage}</p>` : ''}
                        
                        <ol class="text-lg text-gray-200 space-y-4 text-left max-w-md mx-auto mb-8">
                            <li class="flex">
                                <span class="flex-shrink-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center font-bold mr-4">1</span>
                                <span>Click the button below to join our Discord server.</span>
                            </li>
                            <li class="flex">
                                <span class="flex-shrink-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center font-bold mr-4">2</span>
                                <span>Go to the <span class="font-bold text-blue-300 mx-1">#redeem</span> channel.</span>
                            </li>
                            <li class="flex">
                                <span class="flex-shrink-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center font-bold mr-4">3</span>
                                <span>Find the bot and give it this unique code:</span>
                            </li>
                        </ol>

                        <p class="text-4xl font-bold text-white bg-gray-900 px-6 py-4 rounded-lg inline-block font-mono shadow-inner tracking-widest">
                            ${redeemCode}
                        </p>
                        
                        <a href="https://discord.gg/72STf5eq9M" target="_blank" rel="noopener noreferrer" class="mt-10 mb-4 inline-block px-10 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xl font-bold rounded-lg shadow-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 active:scale-100">
                            Join the Discord Server
                        </a>
                    </div>
                    
                    <button onclick="startOver()" class="mt-12 px-8 py-3 bg-gray-600 text-white text-lg font-bold rounded-lg shadow-lg hover:bg-gray-700 transition-all duration-300 active:scale-95">
                        Start Over
                    </button>
                </div>
            `;
        }

        // --- MODIFIED: selectPrize now generates authId and adds to URL ---
        function selectPrize(prize) {
            const newAuthId = crypto.randomUUID(); // Generate ID once here
            window.location.href = `?page=survey&q=0&prize=${encodeURIComponent(prize)}&skipped=0&authId=${newAuthId}`;
        }

        // --- MODIFIED: skipQuestion now passes authId in URL ---
        function skipQuestion() {
            const newSkippedCount = skippedCount + 1;
            const newQuestionIndex = currentQuestionIndex + 1;

            if (newQuestionIndex < surveyQuestions.length) {
                window.location.href = `?page=survey&q=${newQuestionIndex}&prize=${encodeURIComponent(selectedPrize)}&skipped=${newSkippedCount}&authId=${authId}`;
            } else {
                window.location.href = `?page=complete&prize=${encodeURIComponent(selectedPrize)}&skipped=${newSkippedCount}&authId=${authId}`;
            }
        }

        // --- MODIFIED: nextQuestion now passes authId in URL ---
        function nextQuestion() {
            const newQuestionIndex = currentQuestionIndex + 1;
            if (newQuestionIndex < surveyQuestions.length) {
                window.location.href = `?page=survey&q=${newQuestionIndex}&prize=${encodeURIComponent(selectedPrize)}&skipped=${skippedCount}&authId=${authId}`;
            } else {
                window.location.href = `?page=complete&prize=${encodeURIComponent(selectedPrize)}&skipped=${skippedCount}&authId=${authId}`;
            }
        }

        function validateAndNextQuestion() {
            const question = surveyQuestions[currentQuestionIndex];
            const errorEl = document.getElementById('validation-error');
            let isValid = false;

            if (errorTimeout) clearTimeout(errorTimeout);
            
            if (question.type === 'radio') {
                if (document.querySelector('input[name="answer"]:checked')) {
                    isValid = true;
                }
            } else if (question.type === 'checkbox') {
                if (document.querySelectorAll('input[name="answer"]:checked').length > 0) {
                    isValid = true;
                }
            } else if (question.type === 'text') {
                if (document.getElementById('answer').value.trim() !== '') {
                    isValid = true;
                }
            }

            if (isValid) {
                errorEl.textContent = '';
                errorEl.classList.remove('show');
                nextQuestion();
            } else {
                errorEl.textContent = 'Please select an answer.';
                errorEl.classList.add('show');
                
                errorTimeout = setTimeout(() => {
                    errorEl.classList.remove('show');
                }, 3000);
            }
        }

        function startOver() {
            window.location.href = window.location.pathname;
        }

        function renderApp() {
            window.scrollTo(0, 0);

            if (currentPage === 'home') {
                renderHomePage();
            } else if (currentPage === 'survey') {
                renderSurveyPage();
            } else if (currentPage === 'complete') {
                renderCompletePage();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            
            currentPage = params.get('page') || 'home';
            currentQuestionIndex = parseInt(params.get('q') || '0', 10);
            selectedPrize = params.get('prize') || '';
            skippedCount = parseInt(params.get('skipped') || '0', 10);
            // --- MODIFIED: Read authId from URL ---
            authId = params.get('authId') || ''; 
            
            renderApp();

            // --- Run adblock check ---
            checkAdBlocker();
        });
    </script>
</body>
</html>